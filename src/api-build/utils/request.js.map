{"version":3,"sources":["../../api/utils/request.js"],"names":["request","parseJSON","response","json","checkStatus","status","error","Error","statusText","url","options","then","data","catch","err"],"mappings":";;;;;kBAuBwBA,O;;AAvBxB;;;;;;AAEA,SAASC,SAAT,CAAmBC,QAAnB,EAA6B;AAC3B,SAAOA,SAASC,IAAT,EAAP;AACD;;AAED,SAASC,WAAT,CAAqBF,QAArB,EAA+B;AAC7B,MAAIA,SAASG,MAAT,IAAmB,GAAnB,IAA0BH,SAASG,MAAT,GAAkB,GAAhD,EAAqD;AACnD,WAAOH,QAAP;AACD;;AAED,MAAMI,QAAQ,IAAIC,KAAJ,CAAUL,SAASM,UAAnB,CAAd;AACAF,QAAMJ,QAAN,GAAiBA,QAAjB;AACA,QAAMI,KAAN;AACD;;AAED;;;;;;;AAOe,SAASN,OAAT,CAAiBS,GAAjB,EAAsBC,OAAtB,EAA+B;AAC5C,SAAO,qBAAMD,GAAN,EAAWC,OAAX,EACJC,IADI,CACCP,WADD,EAEJO,IAFI,CAECV,SAFD,EAGJU,IAHI,CAGC;AAAA,WAAS,EAAEC,UAAF,EAAT;AAAA,GAHD,EAIJC,KAJI,CAIE;AAAA,WAAQ,EAAEC,QAAF,EAAR;AAAA,GAJF,CAAP;AAKD","file":"request.js","sourcesContent":["import fetch from 'dva/fetch';\n\nfunction parseJSON(response) {\n  return response.json();\n}\n\nfunction checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  }\n\n  const error = new Error(response.statusText);\n  error.response = response;\n  throw error;\n}\n\n/**\n * Requests a URL, returning a promise.\n *\n * @param  {string} url       The URL we want to request\n * @param  {object} [options] The options we want to pass to \"fetch\"\n * @return {object}           An object containing either \"data\" or \"err\"\n */\nexport default function request(url, options) {\n  return fetch(url, options)\n    .then(checkStatus)\n    .then(parseJSON)\n    .then(data => ({ data }))\n    .catch(err => ({ err}));\n}\n"]}