{"version":3,"sources":["../api/index.js"],"names":["app","port","apiPort","use","secret","resave","saveUninitialized","cookie","secure","urlencoded","extended","post","loginStart","loadAuth","countryList","countryReport","villageReport","getChildDetails","searchChildren","countryCheckReport","villageCheckList","req","res","next","changePassword","body","passwordnew1","passwordnew2","passwordold","userId","download","get","loadImg","shenhe","action","applyId","level","operatorId","remark","listen","logout"],"mappings":";;AAAA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;AACA,IAAMA,MAAM,uBAAZ;AACA,IAAMC,OAAQ,kBAAQC,OAAtB;;AAEA;AACAF,IAAIG,GAAJ,CAAQ,6BAAR;AACAH,IAAIG,GAAJ,CAAQ,8BAAQ;AACdC,UAAQ,aADM;AAEdC,UAAQ,IAFM;AAGdC,qBAAmB,KAHL;AAIdC,UAAQ,EAACC,QAAQ,KAAT,CAAgB;AAAhB,GAJM,EAAR,CAAR;;AAOA;AACAR,IAAIG,GAAJ,CAAQ,qBAAWM,UAAX,CAAsB,EAAEC,UAAU,KAAZ,EAAtB,CAAR;;AAEA;AACAV,IAAIW,IAAJ,CAAS,QAAT,EAAmB,cAAKC,UAAxB;;AAEA;AACAZ,IAAIW,IAAJ,CAAS,WAAT,EAAqB,cAAKE,QAA1B;;AAEA;AACAb,IAAIW,IAAJ,CAAS,cAAT,EAAwB,cAAKG,WAA7B;;AAEA;AACAd,IAAIW,IAAJ,CAAS,gBAAT,EAA0B,cAAKI,aAA/B;;AAEA;AACAf,IAAIW,IAAJ,CAAS,gBAAT,EAA0B,cAAKK,aAA/B;;AAEA;AACAhB,IAAIW,IAAJ,CAAS,kBAAT,EAA4B,cAAKM,eAAjC;;AAEA;AACAjB,IAAIW,IAAJ,CAAS,iBAAT,EAA2B,cAAKO,cAAhC;;AAEA;AACAlB,IAAIW,IAAJ,CAAS,qBAAT,EAA+B,cAAKQ,kBAApC;;AAEA;AACAnB,IAAIW,IAAJ,CAAS,mBAAT,EAA6B,cAAKS,gBAAlC;;AAEA;AACApB,IAAIW,IAAJ,CAAS,iBAAT,EAA2B,UAASU,GAAT,EAAaC,GAAb,EAAiBC,IAAjB,EAAsB;AAC3C,gBAAKC,cAAL,CAAoBH,GAApB,EAAwBC,GAAxB,EACI;AACE,cAAUD,IAAII,IAAJ,CAASC,YADrB;AAEE,qBAAiBL,IAAII,IAAJ,CAASE,YAF5B;AAGE,cAAUN,IAAII,IAAJ,CAASG,WAHrB;AAIE,cAAUP,IAAII,IAAJ,CAASI;AAJrB,GADJ;AAQL,CATD;;AAWA;AACA7B,IAAIW,IAAJ,CAAS,WAAT,EAAqB,cAAKmB,QAA1B;;AAEA;AACA9B,IAAI+B,GAAJ,CAAQ,MAAR,EAAe,cAAKC,OAApB;;AAEA;AACAhC,IAAIW,IAAJ,CAAS,SAAT,EAAmB,UAASU,GAAT,EAAaC,GAAb,EAAiBC,IAAjB,EAAsB;AACrC,gBAAKU,MAAL,CAAYZ,GAAZ,EAAgBC,GAAhB,EAAoB;AAChBY,YAAOb,IAAII,IAAJ,CAASS,MADA;AAEhBC,aAAQd,IAAII,IAAJ,CAASU,OAFD;AAGhBC,WAAMf,IAAII,IAAJ,CAASW,KAHC;AAIhBC,gBAAWhB,IAAII,IAAJ,CAASY,UAJJ;AAKhBC,YAAOjB,IAAII,IAAJ,CAASa;AALA,GAApB;AAQH,CATD;;AAWA;AACAtC,IAAIuC,MAAJ,CAAWtC,IAAX,EAAgB,cAAKsC,MAArB;;AAEA;AACAvC,IAAI+B,GAAJ,CAAQ,SAAR,EAAkB,cAAKS,MAAvB","file":"index.js","sourcesContent":["import \"babel-polyfill\";\nimport express from 'express';\nimport bodyParser from \"body-parser\";\nimport configs from \"./utils/configs\"; \nimport session from \"express-session\";\nimport cookieParser from \"cookie-parser\";\nimport apis from \"./lib/\";\n\n// express库\nconst app = new express();\nconst port  = configs.apiPort;\n\n// 配置传输session和cookie\napp.use(cookieParser());\napp.use(session({\n  secret: 'sessiontest',\n  resave: true,\n  saveUninitialized: false,\n  cookie: {secure: false} //不设置过期时间\n}));\n\n//配置解析工具\napp.use(bodyParser.urlencoded({ extended: false}));\n\n// 登录接口\napp.post('/login', apis.loginStart);\n\n// 加载权限\napp.post('/loadAuth',apis.loadAuth);\n\n// 加载镇级别列表\napp.post(\"/countryList\",apis.countryList);\n\n// 加载镇级别报告\napp.post(\"/countryReport\",apis.countryReport);\n\n// 加载村别报告\napp.post(\"/villageReport\",apis.villageReport);\n\n// 加载儿童详情\napp.post(\"/getChildDetails\",apis.getChildDetails);\n\n// 查询接口\napp.post(\"/searchChildren\",apis.searchChildren);\n\n// 加载镇级别保障评估报告\napp.post(\"/countryCheckReport\",apis.countryCheckReport);\n\n// 加载村级别评估报告\napp.post(\"/villageCheckList\",apis.villageCheckList);\n\n// 修改密码\napp.post(\"/changePassword\",function(req,res,next){\n      apis.changePassword(req,res,\n          {\n            \"newPwd\": req.body.passwordnew1,\n            \"newPwdConfirm\": req.body.passwordnew2,\n            \"oldPwd\": req.body.passwordold,\n            \"userId\": req.body.userId\n          }\n      );\n});\n\n// 下载excel\napp.post(\"/download\",apis.download);\n\n// 加载验证码\napp.get('/img',apis.loadImg);\n\n// 审核报告接口\napp.post(\"/shenhe\",function(req,res,next){\n    apis.shenhe(req,res,{\n        action:req.body.action,\n        applyId:req.body.applyId,\n        level:req.body.level,\n        operatorId:req.body.operatorId,\n        remark:req.body.remark\n      }\n    );\n});\n\n// 监听端口\napp.listen(port,apis.listen);\n\n// 登出操作\napp.get('/logout',apis.logout);"]}